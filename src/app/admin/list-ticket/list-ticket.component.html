<div class="container">
  <div class="user-menu">
      <h2>Liste des tickets</h2>
      <button (click)="modalService.getModal('addTicketModal').open()"><i class="fa fa-plus-circle"></i> ajouter</button>
      <button (click)="modalService.getModal('importTicketModal').open()"><i class="fa fa-plus-circle"></i> importer</button>
  </div>
  <p>avec les détails</p>            
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Référence</th>
        <th>Client</th>
        <th>Description</th>
        <th>Utilisateur affécté</th>
        <th>Outils</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let ticket of tickets">
        <td>{{ticket.slug}}</td>
        <td>{{ticket.client.name}}</td>
        <td>{{ticket.title}}</td>
        <td>{{ticket.technician.username}}</td>
        <td class="user-tools center">
            <i (click)="edit(ticket); modalService.getModal('editTicketModal').open()" class="fa fa-pencil-alt"></i>
            <i (click)="archive(ticket); modalService.getModal('archiveTicketModal').open()" class="fa fa-file-archive"></i>
          </td>
      </tr>
    </tbody>
  </table>
</div>

<ngx-smart-modal #addTicketModal identifier="addTicketModal">
  <app-add-ticket></app-add-ticket>
</ngx-smart-modal>

<ngx-smart-modal #importTicketModal identifier="importTicketModal">
  <app-import-ticket></app-import-ticket>
</ngx-smart-modal>

<ngx-smart-modal #editTicketModal identifier="editTicketModal" (onAnyCloseEventFinished)="removeEditData()">
    <div *ngIf="editTicketModal.hasData()">
      <!-- <pre>{{ editTicketModal.getData() | json }}</pre> -->
      <app-edit-ticket [ticket]="editTicketModal.getData()"></app-edit-ticket>
    </div>
</ngx-smart-modal>
  
<ngx-smart-modal #archiveTicketModal identifier="archiveTicketModal" (onAnyCloseEventFinished)="removeArchiveData()">
    <div *ngIf="archiveTicketModal.hasData()">
      <!-- <pre>{{ archiveTicketModal.getData() | json }}</pre> -->
      <app-archive-ticket [ticket]="archiveTicketModal.getData()"></app-archive-ticket>
    </div>
</ngx-smart-modal>
  